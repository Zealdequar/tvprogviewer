@using TvProgViewer.Services.Localization
@using TvProgViewer.Core
@inject ILocalizationService localizationService
@inject IStoreContext storeContext

@{
    Layout = "_ColumnsOne";

    var homepageTitle = await localizationService.GetLocalizedAsync(await storeContext.GetCurrentStoreAsync(), s => s.HomepageTitle);

    //title
    if (!string.IsNullOrEmpty(homepageTitle))
    {
        TvProgHtml.AddTitleParts(homepageTitle);
    }

    var homepageDescription = await localizationService.GetLocalizedAsync(await storeContext.GetCurrentStoreAsync(), s => s.HomepageDescription);

    //meta
    if (!string.IsNullOrEmpty(homepageDescription))
    {
        TvProgHtml.AddMetaDescriptionParts(homepageDescription);
    }

    //page class
    // Html.AppendPageCssClassParts("html-home-page");
    TvProgHtml.AppendCssFileParts("~/css/jqGrid/ui.jqgrid.css");
    TvProgHtml.AppendScriptParts(ResourceLocation.Footer, "~/lib/jqGrid/i18n/grid.locale-ru.js");
    TvProgHtml.AppendScriptParts(ResourceLocation.Footer, "~/lib/jqGrid/jquery.jqgrid.min.js");
    TvProgHtml.AppendScriptParts(ResourceLocation.Footer, "~/js/programmes.js");
    TvProgHtml.AppendScriptParts(ResourceLocation.Footer, "~/js/user-channels.js");
    TvProgHtml.AppendScriptParts(ResourceLocation.Footer, "~/js/jsTree3/jstree.js");
}

<div id="infoPanel" class="card border-info mb-3" style="display: none"> 
    <div class="card-header">Добро пожаловать! Информация</div>
    <div class="collapse show" id="collapseCard">
        <div class="card-body">
            <h5 class="card-title text-info">Укажите предпочитаемые телеканалы</h5>
            <p class="card-text">
                Друзья, рады представить вам обновленный TvProgViewer — удобный и простой инструмент для просмотра программы передач любого канала в любое время. 
                Теперь вы сможете сохранять свои настройки для удобства просмотра, а также легко узнавать программу телепередач на любой из более чем 500 каналов. 
                TvProgViewer запоминает ваши предпочтения и настройки, что делает его использование еще более удобным и простым. 
                Просто выберите те каналы, которые вас интересуют, и нажмите кнопку «Применить» (или обновите страничку F5), чтобы увидеть программу передач. 
                Если вы захотите изменить свои настройки или выбрать другие каналы, вы можете сделать это в любое время.
                TvProgViewer — это отличный инструмент для тех, кто любит смотреть телевизор и хочет получать максимум удовольствия от просмотра.
            </p>
        </div>
    </div>
    <button class="btn btn-outline-secondary" type="button" data-toggle="collapse" data-target="#collapseCard" aria-expanded="false" aria-controls="collapseCard">
        Свернуть/развернуть блок с информацией
    </button>
</div>
<div id="tabs">
    <ul class="ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header">
        <li class="ui-tabs ui-tabs-tab ui-corner-top ui-state-default ui-tab ui-tabs-active ui-state-active"><a href="#tabNow">Сейчас в телеэфире</a></li>
        <li class="ui-tabs"><a class="ui-tabs-anchor" href="#tabNext">Затем в телеэфире</a></li>
        
        <li class="ui-tabs ui-tabs-tab ui-corner-top ui-state-default ui-tab byDays" style="display:none"><a class="ui-tabs-anchor byDays" style="display: none" href="#tabByDays">По дням</a></li>
        <li class="ui-tabs ui-tabs-tab ui-corner-top ui-state-default ui-tab byChannels" style="display:none"><a class="ui-tabs-anchor byChannels" style="display: none" href="#tabByChannels">По каналам</a></li>
        
        <li class="ui-tabs ui-tabs-tab ui-corner-top ui-state-default ui-tab"><a class="ui-tabs-anchor" href="#tabSearch">Поиск по телепрограмме</a></li>
        <li class="ui-tabs ui-tabs-tab ui-corner-top ui-state-default ui-tab"><a class="ui-tabs-anchor" href="#tabChannels">Телеканалы</a></li>
    </ul>
    <div id="tabNow">
        <div id="mainToolNow" class="height-panel" style="display:none">
            <button id="anonsTool" style="display:none;"><img src="~/images/i/GreenAnons.png" /></button>
        </div>
        <div id="dragToolGenreNow" class="drag-tool-genre">
            <div id="genresToolNow" class="btn-group btn-group-sm btn-group-genres-now" style="display: none">

            </div>
        </div>
        <div id="mw" class="mainwindow">
            <table id="TVProgrammeNowGrid"></table>
            <table id="TVProgrammePager"></table>
        </div>
        <div id="anonsDescr" class="description" style="display:none"></div>
        <div style="clear:both"></div>
    </div>
    <div id="tabNext">
        <div id="mainToolNext" style="display:none">
            <button id="anonsToolNext" style="margin: 3px; display:none;"><img src="~/images/i/GreenAnons.png" /></button>
        </div>
        <div id="dragToolGenreNext" class="drag-tool-genre">
            <div id="genresToolNext" class="btn-group btn-group-sm btn-group-genres-next" style="display: none">

            </div>
        </div>
        <div id="mw2" class="mainwindow">
            <table id="TVProgrammeNextGrid"></table>
            <table id="TVProgrammeNextPager"></table>
        </div>
        <div id="anonsDescrNext" class="description" style="display:none"></div>
        <div style="clear:both"></div>
    </div>
    
        <div id="tabByDays" class="byDays" style="display: none;">
        <div class = "height-panel">
                <button id="anonsToolByDays" style="margin: 3px; display:none;"><img src="~/images/i/GreenAnons.png" /></button>
            </div>
            <div class="row panel">
                <div class="col-xs-2">
                    <div id="containerByDays"></div>
                </div>
                <div class="col-sm-1">
                </div>
                <div class="col-sm-8">
                <div id="mw5" class="mainwindow sticky-day">
                        <div style="position: relative; height: 55px;">
                            <div id="ct" style="position: absolute; left: 0; padding: 8px 7px">
                                <img id="pic" style="display: none" />
                            </div>
                            <div id="channelText" style="position: absolute; font-size: 22pt; color: olive; height: 52px; left: 60px; top: 10px;"></div>
                            <div id="dtFull" style="display:none; position: absolute; height: 52px; right: 100px; font-size: 16pt;  color: olive; top: 18px; "></div>
                        </div>
                        <aside id="aside1">
                            <table id="TVProgrammeByDaysGrid"></table>
                            <table id="TVProgrammeByDaysPager"></table>
                            <div id="anonsDescrByDays" class="description" style="display:none"></div>
                        </aside>
                        <div style="clear:both"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tabByChannels" class="byChannels" style="display: none;">
            <div style="height:34px">
                <button id="anonsToolByChannels" style="margin: 3px; display:none;"><img src="~/images/i/GreenAnons.png" /></button>
            </div>
            <div class="row panel">
                <div class="col-xs-2">
                    <div id="containerByChannels"></div>
                </div>
                <div class="col-sm-1">
                </div>
                <div class="col-sm-8">
                    <div id="mw6" class="mainwindow sticky-channel">
                        <aside id="aside2">
                            <table id="TVProgrammeByChannelsGrid"></table>
                            <table id="TVProgrammeByChannelsPager"></table>
                            <div id="anonsDescrByChannels" class="description" style="display:none"></div>
                        </aside>
                        <div style="clear:both"></div>
                    </div>
                </div>
            </div>
        </div>
    
    <div id="tabSearch">
        <div id="mw3" class="mainwindow">
            <div id="searchPanel" style="display: none">
                <div id="mainToolSearch" style="height:34px; display:none">
                    <button id="anonsToolSearch" style="margin: 3px; display:none;"><img src="~/images/i/GreenAnons.png" /></button>
                </div>
                <div id="dragToolGenreSearch" class="drag-tool-genre">
                    <div id="genresToolSearch" class="btn-group btn-group-sm btn-group-genres-search" style="display: none">

                    </div>

                </div>
                <div style="height: 39px; padding-left: 12px;">
                    <label for="tbContains">Содержит</label>
                    <input name="tbContains" id="tbContains" class="input-medium" type="text" />
                    <input id="btnSearch" type="button" value="Найти" />
                </div>
                <div id="datesToolSearch" class="container-fluid" style="margin-top: 10px">

                </div>
                <table id="SearchedTVProgramme"></table>
                <table id="TVProgrammeSearchPager"></table>
                <div id="anonsDescrSearch" class="description" style="display:none"></div>
            </div>
            <div style="clear:both"></div>
        </div>
    </div>
    <div id="tabChannels">
        <div id="mw4" class="mainwindow">
            <div id="mainToolChannel" class="btn-group btn-group-sm" style="height:34px; display:none">
                <button id="ChannelTool" style="display:none;">Сбросить все выделенные телеканалы</button>
                <button id="ApplyTool" style="display:none;">Применить</button>
            </div>
            <table id="tblSystemChannelsGrid"></table>
            <table id="systemChannelsPager"></table>
            <input id="hiddenChannels" type="hidden" />
        </div>
        <div style="clear:both"></div>
    </div>
</div>
<div style="clear:both"></div>
<div id="period" class="period"></div>
<div style="clear:both"></div>



